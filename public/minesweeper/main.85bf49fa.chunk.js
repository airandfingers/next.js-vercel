(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(t,e,n){},13:function(t,e,n){},14:function(t,e,n){"use strict";n.r(e);var a,c,r,i,o=n(0),u=n(2),s=n.n(u),l=n(6),d=n.n(l),h=(n(12),n(1)),O=n(4);n(13);!function(t){t.MINE="\ud83d\udca3",t.EMPTY="",t.ONE="1",t.TWO="2",t.THREE="3",t.FOUR="4",t.FIVE="5",t.SIX="6",t.SEVEN="7",t.EIGHT="8"}(a||(a={})),function(t){t.NEW="",t.FLAG="\ud83d\udea9",t.FALSE_FLAG="\ud83c\udf8c",t.EXPLODED_MINE="\ud83d\udca5"}(c||(c={})),function(t){t.UNINITIALIZED="UNINITIALIZED",t.NEW="NEW",t.IN_PROGRESS="IN_PROGRESS",t.WON="WON",t.LOST="LOST"}(r||(r={})),function(t){t.NEW_GAME="NEW_GAME",t.OPEN_CELL="OPEN_CELL",t.TOGGLE_FLAG="TOGGLE_FLAG"}(i||(i={}));var E,j=function(t,e,n){var a={type:i.NEW_GAME,payload:{}};return void 0!==t&&void 0!==e&&void 0!==n&&(a.payload={boardSize:{width:t,height:e},numMines:n}),a},m=function(t){var e=t.label,n=t.value,a=t.min,c=t.max,r=t.setValue;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{htmlFor:e,children:e}),Object(o.jsx)("input",Object(h.a)({type:"number",id:e},{value:n,min:a,max:c,onChange:function(t){return r(parseInt(t.target.value))}}))]})},b=function(t){var e=t.dispatch,n=Object(u.useState)(30),a=Object(O.a)(n,2),c=a[0],r=a[1],i=Object(u.useState)(16),s=Object(O.a)(i,2),l=s[0],d=s[1],h=Object(u.useState)(99),E=Object(O.a)(h,2),b=E[0],N=E[1];return Object(o.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(j(c,l,b))},children:[Object(o.jsx)(m,{label:"Width",value:c,min:1,max:1e4,setValue:r}),Object(o.jsx)(m,{label:"Height",value:l,min:1,max:1e4,setValue:d}),Object(o.jsx)(m,{label:"# Mines",value:b,min:0,max:1e4,setValue:N}),Object(o.jsx)("input",{type:"submit",value:"Start New Game"})]})},N=n(3),f=(E={},Object(N.a)(E,r.UNINITIALIZED,"\ud83d\udc31"),Object(N.a)(E,r.NEW,"\ud83d\ude3a"),Object(N.a)(E,r.IN_PROGRESS,"\ud83d\ude3a"),Object(N.a)(E,r.LOST,"\ud83d\ude3f"),Object(N.a)(E,r.WON,"\ud83d\ude3b"),E),p=function(t){var e=t.status,n=t.numMines,a=t.numFlags,c=t.dispatch,i=n-a,u="".concat(i," mines remaining");1===i&&(u="1 mine remaining"),e===r.WON&&(u="You win!"),e===r.LOST&&(u="You lose!");return Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{children:u}),"\xa0",Object(o.jsx)("button",{onClick:function(){return c(j())},children:f[e]})]})},v=function(t){var e,n,a,r=t.cellState,u=t.rowNum,s=t.colNum,l=t.dispatch,d=r.contents,O=r.contents;return d===c.NEW||d===c.FLAG?(e="closed",a=function(t){t.preventDefault(),l(function(t,e){return{type:i.TOGGLE_FLAG,payload:{rowNum:t,colNum:e}}}(u,s))},d===c.NEW&&(n=function(){return l(function(t,e){return{type:i.OPEN_CELL,payload:{rowNum:t,colNum:e}}}(u,s))},O=null)):e="open",Object(o.jsx)("td",Object(h.a)(Object(h.a)({className:"cell noselect ".concat(e)},{onClick:n,onContextMenu:a}),{},{children:O}))};v=s.a.memo(v);var S=function(t){var e=t.cellStates,n=t.rowNum,a=t.dispatch;return Object(o.jsx)("tr",{className:"row",children:e.map((function(t,e){return Object(o.jsx)(v,Object(h.a)({},{cellState:t,rowNum:n,colNum:e,dispatch:a}),"cell-".concat(n,".").concat(e))}))},"row-".concat(n))};S=s.a.memo(S,(function(t,e){return t.cellStates.length===e.cellStates.length&&t.cellStates.every((function(t,n){return t.contents===e.cellStates[n].contents}))}));var I=function(t){for(var e=t.boardState,n=t.boardSize,a=n.width,c=n.height,r=t.dispatch,i=[],u=a*c,s=0;s<u;s+=a)i.push(e.slice(s,s+a));return Object(o.jsx)("table",{onContextMenu:function(t){return t.preventDefault()},children:Object(o.jsx)("tbody",{children:i.map((function(t,e){return Object(o.jsx)(S,Object(h.a)({},{cellStates:t,rowNum:e,dispatch:r}),"row-".concat(e))}))})})},L=function(t){return t.map((function(t){return{contents:t.contents}}))},g=[a.EMPTY,a.ONE,a.TWO,a.THREE,a.FOUR,a.FIVE,a.SIX,a.SEVEN,a.EIGHT],G=function(t,e){var n=e.width,a=e.height,c=function(t,e){var n=e.width;return{rowNum:~~(t/n),colNum:t%n}}(t,{width:n,height:a}),r=c.rowNum,i=c.colNum,o=0===i,u=i===n-1,s=r===a-1,l=[];return 0===r||(o||l.push(t-n-1),l.push(t-n),u||l.push(t-n+1)),o||l.push(t-1),u||l.push(t+1),s||(o||l.push(t+n-1),l.push(t+n),u||l.push(t+n+1)),l},w=function(t,e,n){n[t].contents=e},F=function(t,e,n){t.forEach((function(t,r){var i=t.value,o=n[r].contents;o===c.NEW&&i===a.MINE?w(r,e,n):o===c.FLAG&&i!==a.MINE&&w(r,c.FALSE_FLAG,n)}))},x=function(t,e){var n=e.type,o=e.payload,u=t.boardState,s=t.numFlags,l=t.status,d=t.boardSize,O=t.numMines;if(n===i.NEW_GAME){var E,j,m=o,b=m.boardSize,N=m.numMines;N=null!==(j=N)&&void 0!==j?j:O;for(var f=(b=null!==(E=b)&&void 0!==E?E:d).width*b.height,p=[],v=0;v<f;v++)p.push({contents:c.NEW});return{status:r.NEW,boardState:p,numFlags:0,boardSize:b,numMines:N,positionInfos:[],numOpened:0}}var S=o,I=function(t,e,n){return t*n.width+e}(S.rowNum,S.colNum,d);if(n===i.OPEN_CELL){var x=t.status,M=t.positionInfos,A=t.numOpened;if(x===r.NEW)M=function(t,e){for(var n=[],c=t.width*t.height,r=0;r<c;r++){var i={value:a.MINE};if(!e.has(r)){var o=G(r,t),u=o.filter((function(t){return e.has(t)})).length;i.value=g[u],i.adjacentPositions=o}n.push(i)}return n}(d,function(t,e,n){var a=t.width,c=t.height,r=new Set,i=a*c,o=e,u=0,s=e>i/2;for(s&&(o=i-e,r.add(n),u=1);u<o;){var l=~~(Math.random()*i);r.has(l)||!s&&l===n||(r.add(l),u++)}if(!s)return r;for(var d=new Set,h=0;h<i;h++)r.has(h)||d.add(h);return d}(d,O,I)),x=r.IN_PROGRESS;else if(x!==r.IN_PROGRESS)return console.log("Ignoring OPEN_CELL action dispatched when status is",x),t;var T=L(u);return console.log(M,I),M[I].value===a.MINE?(w(I,c.EXPLODED_MINE,T),x=r.LOST,F(M,a.MINE,T)):(A+=function(t,e,n,r){var i=new Set([t]),o=0;return i.forEach((function(t){if(r[t].contents===c.NEW){var e=n[t],u=e.value,s=e.adjacentPositions;w(t,g[parseInt(u,10)],r),o++,u===a.EMPTY&&s&&s.forEach((function(t){return i.add(t)}))}})),o}(I,0,M,T))>=d.width*d.height-O&&(x=r.WON,F(M,c.FLAG,T)),Object(h.a)(Object(h.a)({},t),{},{status:x,boardState:T,positionInfos:M,numOpened:A})}if(n===i.TOGGLE_FLAG){if(l!==r.NEW&&l!==r.IN_PROGRESS)return console.log("Ignoring TOGGLE_FLAG action dispatched when status is",l),t;var W,_,P=u[I].contents;if(P===c.FLAG)W=c.NEW,_=s-1;else{if(P!==c.NEW)return console.log("Ignoring TOGGLE_FLAG action dispatched for cell with contents",P),t;if(s===t.numMines)return console.log("Ignoring TOGGLE_FLAG action",{numFlags:s,numMines:t.numMines}),t;W=c.FLAG,_=s+1}var R=L(u);return w(I,W,R),Object(h.a)(Object(h.a)({},t),{},{boardState:R,numFlags:_})}return console.error("gameReducer called with unknown action:",{type:n,payload:o}),t},M=function(){var t=Object(u.useReducer)(x,{status:r.UNINITIALIZED,boardState:[],numFlags:0,boardSize:{width:0,height:0},numMines:0,positionInfos:[],numOpened:0}),e=Object(O.a)(t,2),n=e[0],a=e[1],c=n.status,i=n.numMines,s=n.numFlags;return Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{className:"App-header",children:Object(o.jsx)("h1",{children:"Minesweeper!"})}),Object(o.jsxs)("main",{children:[Object(o.jsx)(b,{dispatch:a}),n.status!==r.UNINITIALIZED&&Object(o.jsxs)("div",{className:"game",children:[Object(o.jsx)(p,Object(h.a)({},{status:c,numMines:i,numFlags:s,dispatch:a})),Object(o.jsx)(I,Object(h.a)({},Object(h.a)(Object(h.a)({},n),{},{dispatch:a})))]})]})]})},A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))};d.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(M,{})}),document.getElementById("root")),A()}},[[14,1,2]]]);
//# sourceMappingURL=main.85bf49fa.chunk.js.map